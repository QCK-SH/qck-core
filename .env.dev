# Development Environment Configuration
# This file is used for local development

# ============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# ============================================================================
DATABASE_URL=postgresql://qck_dev_user:dev_password_2024@qck-postgres-oss-dev:5432/qck_dev_db
DATABASE_MAX_CONNECTIONS=300
DATABASE_MIN_CONNECTIONS=5
DATABASE_CONNECT_TIMEOUT=10
DATABASE_IDLE_TIMEOUT=600
DATABASE_MAX_LIFETIME=1800
POSTGRES_USER=qck_dev_user
POSTGRES_PASSWORD=dev_password_2024
POSTGRES_DB=qck_dev_db

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
REDIS_URL=redis://qck-redis-oss-dev:6379
REDIS_POOL_SIZE=150
REDIS_MAX_CONNECTIONS=150
REDIS_CONNECTION_TIMEOUT=5
REDIS_RESPONSE_TIMEOUT=5

# ============================================================================
# CLICKHOUSE CONFIGURATION
# ============================================================================
CLICKHOUSE_URL=http://qck-clickhouse-oss-dev:8123
CLICKHOUSE_DB=qck_analytics
CLICKHOUSE_USER=qck_user
CLICKHOUSE_PASSWORD=qck_password

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================
# JWT HS256 Configuration (Test)
JWT_ACCESS_SECRET=test-access-secret-hs256-minimum-32-chars-required
JWT_REFRESH_SECRET=test-refresh-secret-hs256-minimum-32-chars-required
JWT_ACCESS_EXPIRY=3600      # 1 hour for tests
JWT_REFRESH_EXPIRY=86400    # 1 day (without remember_me)
JWT_KEY_VERSION=1
JWT_AUDIENCE=test.qck.sh
JWT_ISSUER=test.qck.sh
BCRYPT_COST=4
JTI_HASH_SALT=test-jti-salt-for-secure-refresh-token-hashing-32bytes-minimum-required

# Rate Limiting Configuration (Test - Very lenient)
RATE_LIMIT_PER_SECOND=1000
RATE_LIMIT_BURST=2000
RATE_LIMIT_ANALYTICS_SAMPLE_RATE=0.0
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:3002,http://localhost:10180

# Refresh Token Rate Limiting (Test)
REFRESH_RATE_LIMIT_MAX_REQUESTS=100
REFRESH_RATE_LIMIT_WINDOW_SECONDS=60
REFRESH_RATE_LIMIT_BURST_LIMIT=10
REFRESH_RATE_LIMIT_BLOCK_DURATION=60

# Login Rate Limiting (Dev - Very lenient)
LOGIN_RATE_LIMIT_PER_IP=100          # Max login attempts per IP per minute (dev: very lenient)
LOGIN_RATE_LIMIT_PER_EMAIL=200       # Max login attempts per email per hour (dev: very lenient)

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================
ENVIRONMENT=development
RUST_LOG=info,qck_backend=debug
RUST_BACKTRACE=1
BIND_ADDRESS=0.0.0.0:8080

# ============================================================================
# TEST FEATURES
# ============================================================================
RUN_MIGRATIONS=true
ENABLE_HOT_RELOAD=false
ENABLE_DEBUG_ENDPOINTS=false
ENABLE_SWAGGER_UI=true

# Minimum seconds between email resend attempts
EMAIL_MIN_RESEND_COOLDOWN=60

# API exposed port for external connections
API_PORT=10110

# ============================================================================
# APPLICATION CONFIGURATION (Shared between backend and frontend)
# ============================================================================
APP_NAME=QCK
ENVIRONMENT=development
NODE_ENV=development
API_TIMEOUT=30000

# JWT Configuration (used by both backend and frontend)
# JWT_ACCESS_EXPIRY and JWT_REFRESH_EXPIRY already defined above

# Feature Flags
ENABLE_ANALYTICS=false
ENABLE_SENTRY=false
MAINTENANCE_MODE=false

# Logging Configuration
LOG_LEVEL=debug
LOG_CONSOLE=true

# UI/UX Configuration
JWT_LIFETIME_WARNINGS=true
JWT_LIFETIME_TOLERANCE_MS=5000

# Password Reset Configuration
PASSWORD_RESET_TOKEN_MIN_LENGTH=32
PASSWORD_RESET_SUCCESS_REDIRECT_DELAY_MS=3000
PASSWORD_RESET_TOKEN_FORMAT_REGEX=^[A-Za-z0-9\-_=]+\.?[A-Za-z0-9\-_=]*\.?[A-Za-z0-9\-_=]*$

# ============================================================================
# FRONTEND URLS (Environment-specific, keep NEXT_PUBLIC_ prefix)
# ============================================================================
NEXT_PUBLIC_API_URL=http://localhost:10110/api
NEXT_PUBLIC_DASHBOARD_URL=http://localhost:10110/app
NEXT_PUBLIC_ADMIN_URL=http://localhost:10110/admin
NEXT_PUBLIC_MARKETING_URL=http://localhost:10110


# ============================================================================
# NEXTAUTH CONFIGURATION
# ============================================================================
NEXTAUTH_SECRET_DASHBOARD=dev-dashboard-secret-change-me-32chars-minimum
NEXTAUTH_SECRET_ADMIN=dev-admin-secret-change-me-32chars-minimum-req

# ============================================================================
# ADMIN PANEL SECURITY
# ============================================================================
ADMIN_SECRET_KEY=dev-admin-key-change-me
SESSION_SECRET=dev-session-secret-change-me
AUDIT_LOG_LEVEL=debug
IP_WHITELIST=0.0.0.0/0

# ============================================================================
# EMAIL CONFIGURATION (Resend)
# ============================================================================
EMAIL_PROVIDER=resend
RESEND_API_KEY=your_resend_api_key_here
EMAIL_FROM_ADDRESS=noreply@qck.sh
EMAIL_FROM_NAME="QCK Development"
EMAIL_VERIFICATION_CODE_TTL=900      # 15 minutes
EMAIL_VERIFICATION_MAX_ATTEMPTS=5    # Max attempts per code
EMAIL_RESEND_LIMIT=3
EMAIL_RESEND_WINDOW=86400
SUPPORT_EMAIL=support@qck.sh

# ============================================================================
# LINK MANAGEMENT & SHORT CODE GENERATION
# ============================================================================
# Short code generation configuration (uses BASE62: 0-9, A-Z, a-z)
SHORT_CODE_MIN_LENGTH=4              # Minimum length for generated codes
SHORT_CODE_DEFAULT_LENGTH=7          # Default length for generated codes  
SHORT_CODE_MAX_LENGTH=12             # Maximum length for generated codes
SHORT_CODE_MAX_RETRIES=5             # Max retries for collision resolution
SHORT_CODE_BATCH_SIZE=1000           # Batch size for bulk generation

# Link management settings
MAX_URL_LENGTH=8192                  # Maximum URL length allowed
LINK_CACHE_TTL=3600                  # Redis cache TTL for links (1 hour)

# URL Validation Configuration
VALIDATE_DNS=true  # Enable DNS resolution validation for URLs